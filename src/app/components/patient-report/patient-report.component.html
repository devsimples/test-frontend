<div class="container" style="margin-top: 70px;">
  
  <app-alert #alertComponent></app-alert>

  <h1>Appointments per Patient Report</h1>
  <form>
        <div class="form-group">
            <label for="patientId">Patient ID</label>
            <div class="row">
              <div class="col">
                <input id="patientId" type="text" class="form-control" #patientId placeholder="Example: marcos">
              </div>
              <div class="col">
                <button class="btn btn-primary" type="button" (click)="generateReport(patientId.value)">Search</button>
              </div>
            </div>
        </div>
  </form>

  <table class="table table-hover table-striped" *ngIf="report && report.weeks.length > 0" >
    <thead>
      <tr>
        <th>Year</th>
        <th>Week of Year</th>
        <th>Number of appointments</th>
        <th>CONSULTATION</th>
        <th>EXAMINATION</th>
        <th>ROUTINE</th>
        <th>MEDICAL_PROCEDURE</th>
        <th>CHECKUP</th>
        <th>Average Outcomes</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let w of report.weeks">
        <td> {{ w.year }}</td>
        <td> {{ w.weekOfYear }}</td>
        <td> {{ w.numberOfAppointments }}</td>
        <td> {{ w.countPerType['CONSULTATION'] }}</td>
        <td> {{ w.countPerType['EXAMINATION'] }}</td>
        <td> {{ w.countPerType['ROUTINE'] }}</td>
        <td> {{ w.countPerType['MEDICAL_PROCEDURE'] }}</td>
        <td> {{ w.countPerType['CHECKUP'] }}</td>
        <td> {{ w.averageOutcomes }}</td>
      </tr>
    </tbody>
  </table>

</div>
